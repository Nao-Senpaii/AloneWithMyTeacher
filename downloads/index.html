<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Downloads</title>
    <meta name="description" content="Download the latest version of the visual novel 'Alone With My Teacher'." />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="shortcut icon" href="https://img.itch.zone/aW1nLzIyMzIzNTI0LmpwZw==/32x32%23/3%2F9E71.jpg" type="image/x-icon">
    <link rel="stylesheet" href="./../src/styles/style.css">
  </head>

  <body>
    <a class="skip-link visually-hidden-focusable" href="#main">Skip to content</a>

    <header class="sticky-top">
      <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
          <a class="navbar-brand" href="/">Alone With My Teacher</a>

          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                  aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
              <li class="nav-item">
                <a class="nav-link" href="/">Summary</a>
              </li>
            <li class="nav-item">
              <a class="nav-link" href="/goals/">Roadmap</a> 
            </li>
              <li class="nav-item">
                <a class="nav-link" href="/gallery/">Gallery</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/downloads/">Download</a>
              </li>
            </ul>

          </div>
        </div>
      </nav>
    </header>

    <main id="main" tabindex="-1">
      <section id="download-page" class="py-5">
        <div class="container">
          <h2 class="text-center">Downloads!</h2>

          <div class="row g-5">
            <div class="col-lg-7">
              <h3 class="mb-3" style="font-family: 'Comfortaa', cursive; color: var(--accent);">Current Version</h3>

              <div class="download-box shadow-cozy mb-3">
                <div class="mb-3">
                  <span class="badge text-bg-primary me-2" style="background-color: var(--accent) !important;">v0.12.1</span>
                </div>

                <div class="list-group itch-download-list shadow-cozy" style="border-radius: 12px; overflow: hidden;">
                  <a href="https://github.com/Nao-Senpaii/AloneWithMyTeacher/releases/download/0.12.2/AloneWithMyTeacher-0.12.2-pc.zip" class="list-group-item list-group-item-action d-flex flex-wrap justify-content-between align-items-center gap-2">
                    <div class="d-flex align-items-center">
                      <span class="btn btn-download-itch me-3">Download</span>
                      <span class="fw-bold">AloneWithMyTeacher-0.12.2-pc.zip</span>
                    </div>
                    <div class="text-muted small ms-auto">
                      <i class="fab fa-windows fa-lg me-1" title="Windows"></i>
                      <i class="fab fa-linux fa-lg" title="Linux"></i>
                    </div>
                  </a>

                  <a href="https://github.com/Nao-Senpaii/AloneWithMyTeacher/releases/download/0.12.2/AloneWithMyTeacher-0.12.2-mac.zip" class="list-group-item list-group-item-action d-flex flex-wrap justify-content-between align-items-center gap-2">
                    <div class="d-flex align-items-center">
                      <span class="btn btn-download-itch me-3">Download</span>
                      <span class="fw-bold">AloneWithMyTeacher-0.12.2-mac.zip</span>
                    </div>
                    <div class="text-muted small ms-auto">
                      <i class="fab fa-apple fa-lg" title="Mac OS"></i>
                    </div>
                  </a>

                  <a href="https://github.com/Nao-Senpaii/AloneWithMyTeacher/releases/download/0.12.2/alonewithmyteacher-0.12.2.apk" class="list-group-item list-group-item-action d-flex flex-wrap justify-content-between align-items-center gap-2">
                    <div class="d-flex align-items-center">
                      <span class="btn btn-download-itch me-3">Download</span>
                      <span class="fw-bold">alonewithmyteacher-0.12.2.apk</span>
                    </div>
                    <div class="text-muted small ms-auto">
                      <i class="fab fa-android fa-lg" title="Android"></i>
                    </div>
                  </a>
                </div>
              </div>

              <h3 class="mb-3 mt-5" style="font-family: 'Comfortaa', cursive; color: var(--accent);">Earlier Versions</h3>

              <div class="download-box shadow-cozy mb-3">

                <div id="versionsContainer" class="list-group itch-download-list shadow-cozy" style="border-radius: 12px; overflow: hidden;">
                  <!-- Las versiones se generarán dinámicamente aquí -->
                </div>

                <!-- Paginación -->
                <nav aria-label="Versions pagination" class="mt-3">
                  <ul class="pagination justify-content-center" id="paginationContainer">
                    <!-- Los botones de paginación se generarán aquí -->
                  </ul>
                </nav>
              </div>
            </div>

            <div class="col-lg-5">
              <img src="./../src/imgs/AWMT_Characters.jpg" alt="Illustrative game scene"
                   class="img-fluid rounded-3 shadow-cozy mt-5 mb-4" loading="lazy">

              <h4 class="mb-3" style="font-family: 'Comfortaa', cursive;">Support Development</h4>
              <p class="text-muted">Your support allows me to create more content, faster. Consider joining the community!</p>

              <a href="https://www.patreon.com/cw/AloneWithMyTeacher" target="_blank"
                 class="btn btn-patreon btn-lg w-100 mb-2 shadow-sm" role="button">
                <i class="fab fa-patreon me-2"></i>Support on Patreon
              </a>

              <h4 class="mt-5 mb-3" style="font-family: 'Comfortaa', cursive;">Demo Downloads</h4>

              <div class="list-group itch-download-list shadow-cozy" style="border-radius: 12px; overflow: hidden;">
                <a href="https://github.com/Nao-Senpaii/AloneWithMyTeacher/archive/refs/tags/videogame.zip" class="list-group-item list-group-item-action d-flex flex-wrap justify-content-between align-items-center gap-2">
                  <div class="d-flex align-items-center">
                    <span class="btn btn-download-itch me-3">Download</span>
                    <span class="fw-bold">AWMT_DEMO_mac.zip</span>
                  </div>
                  <div class="text-muted small ms-auto">
                    <span class="me-2">349 MB</span>
                    <i class="fab fa-apple fa-lg" title="Mac OS"></i>
                  </div>
                </a>

                <a href="https://github.com/Nao-Senpaii/AloneWithMyTeacher/releases/download/demo-pc/AloneWithMyTeacherDEMO-Demo-1.0.0-pc.zip" class="list-group-item list-group-item-action d-flex flex-wrap justify-content-between align-items-center gap-2">
                  <div class="d-flex align-items-center">
                    <span class="btn btn-download-itch me-3">Download</span>
                    <span class="fw-bold">AWMT_DEMO_PC.zip</span>
                  </div>
                  <div class="text-muted small ms-auto">
                    <span class="me-2">357 MB</span>
                    <i class="fab fa-windows fa-lg me-1" title="Windows"></i>
                    <i class="fab fa-linux fa-lg" title="Linux"></i>
                  </div>
                </a>

                <a href="https://github.com/Nao-Senpaii/AloneWithMyTeacher/releases/download/demo-android/AloneWithMyTeacheDEMO.apk" class="list-group-item list-group-item-action d-flex flex-wrap justify-content-between align-items-center gap-2">
                  <div class="d-flex align-items-center">
                    <span class="btn btn-download-itch me-3">Download</span>
                    <span class="fw-bold">AWMT_DEMO_APK.apk</span>
                  </div>
                  <div class="text-muted small ms-auto">
                    <span class="me-2">358 MB</span>
                    <i class="fab fa-android fa-lg" title="Android"></i>
                  </div>
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer-simple">
      <div class="container text-center py-3">
        <p class="mb-0">
          Copyright © 2025 <strong>ghelber</strong>. All rights reserved. |
          <a href="https://www.patreon.com/cw/AloneWithMyTeacher" target="_blank" class="footer-link">Donations</a>
        </p>
      </div>
    </footer>

    <div class="modal fade" id="ageModal" data-bs-backdrop="static" data-bs-keyboard="false"
         tabindex="-1" aria-labelledby="ageModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content shadow-cozy">
          <div class="modal-header">
            <h5 class="modal-title" id="ageModalLabel">
              <i class="fas fa-exclamation-triangle me-2" aria-hidden="true"></i>Age Verification
            </h5>
          </div>
          <div class="modal-body">
            <p>This website contains adult material (+18) and is not suitable for minors.</p>
            <p>Please confirm you are <strong>18 years or older</strong> to continue.</p>
          </div>
          <div class="modal-footer justify-content-center">
            <button type="button" class="btn btn-secondary btn-lg" id="btn-modal-exit">Exit</button>
            <button type="button" class="btn btn-primary btn-lg" id="btn-modal-enter">Enter (I am 18+)</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>

    <script defer>
      // Sistema de paginación para versiones
      document.addEventListener('DOMContentLoaded', function() {
        const versions = [
          { version: '0.12.2', path: 'versions/0-12-2', isCurrent: true },
          { version: '0.12.1', path: 'versions/0-12-1', isCurrent: false },
          { version: '0.11.1', path: 'versions/0-11-1', isCurrent: false },
          { version: '0.10.1', path: 'versions/0-10-1', isCurrent: false },
          { version: '0.0.9', path: 'versions/0-0-9', isCurrent: false },
          { version: '0.0.8', path: 'versions/0-0-8', isCurrent: false },
          { version: '0.0.7', path: 'versions/0-0-7', isCurrent: false },
          { version: '0.0.6', path: 'versions/0-0-6', isCurrent: false },
          { version: '0.0.5', path: 'versions/0-0-5', isCurrent: false },
          { version: '0.0.4', path: 'versions/0-0-4', isCurrent: false },
          { version: '0.0.3', path: 'versions/0-0-3', isCurrent: false },
          { version: '0.0.2', path: 'versions/0-0-2', isCurrent: false },
          { version: '0.0.1', path: 'versions/0-0-1', isCurrent: false }
        ];

        const itemsPerPage = 10;
        let currentPage = 1;

        function renderVersions(page) {
          const container = document.getElementById('versionsContainer');
          container.innerHTML = '';

          const startIndex = (page - 1) * itemsPerPage;
          const endIndex = startIndex + itemsPerPage;
          const pageVersions = versions.slice(startIndex, endIndex);

          pageVersions.forEach(v => {
            const link = document.createElement('a');
            link.href = './../' + v.path + '/';
            link.className = 'list-group-item list-group-item-action d-flex flex-wrap justify-content-between align-items-center gap-2';
            
            const titleDiv = document.createElement('div');
            titleDiv.className = 'd-flex align-items-center';
            titleDiv.innerHTML = `<span class="fw-bold">Alone With My Teacher ${v.version}</span>`;
            
            link.appendChild(titleDiv);

            if (v.isCurrent) {
              const badgeDiv = document.createElement('div');
              badgeDiv.innerHTML = '<span class="badge text-bg-primary me-2" style="background-color: var(--accent) !important;">Current Version</span>';
              link.appendChild(badgeDiv);
            }

            container.appendChild(link);
          });
        }

        function renderPagination() {
          const paginationContainer = document.getElementById('paginationContainer');
          paginationContainer.innerHTML = '';

          const totalPages = Math.ceil(versions.length / itemsPerPage);

          // Botón anterior
          const prevLi = document.createElement('li');
          prevLi.className = 'page-item ' + (currentPage === 1 ? ' disabled' : '');
          const prevLink = document.createElement('a');
          prevLink.className = 'page-link';
          prevLink.href = '#';
          prevLink.textContent = 'Previous';
          prevLink.addEventListener('click', (e) => {
            e.preventDefault();
            if (currentPage > 1) {
              currentPage--;
              renderVersions(currentPage);
              renderPagination();
            }
          });
          prevLi.appendChild(prevLink);
          paginationContainer.appendChild(prevLi);

          // Números de página
          for (let i = 1; i <= totalPages; i++) {
            const li = document.createElement('li');
            li.className = 'page-item' + (i === currentPage ? ' active' : '');
            const link = document.createElement('a');
            link.className = 'page-link';
            link.href = '#';
            link.textContent = i;
            link.addEventListener('click', (e) => {
              e.preventDefault();
              currentPage = i;
              renderVersions(currentPage);
              renderPagination();
            });
            li.appendChild(link);
            paginationContainer.appendChild(li);
          }

          // Botón siguiente
          const nextLi = document.createElement('li');
          nextLi.className = 'page-item' + (currentPage === totalPages ? ' disabled' : '');
          const nextLink = document.createElement('a');
          nextLink.className = 'page-link';
          nextLink.href = '#';
          nextLink.textContent = 'Next';
          nextLink.addEventListener('click', (e) => {
            e.preventDefault();
            if (currentPage < totalPages) {
              currentPage++;
              renderVersions(currentPage);
              renderPagination();
            }
          });
          nextLi.appendChild(nextLink);
          paginationContainer.appendChild(nextLi);
        }

        // Renderizar inicial
        renderVersions(currentPage);
        renderPagination();
      });
    </script>

    <script defer>
      (function () {
        const ageModalEl = document.getElementById('ageModal');
        const btnExit = document.getElementById('btn-modal-exit');
        const btnEnter = document.getElementById('btn-modal-enter');
        const bsModal = new bootstrap.Modal(ageModalEl);
        const KEY = 'awmt_age_confirmed_v1';

        function isConfirmed() {
          try { return localStorage.getItem(KEY) === 'true'; }
          catch (e) { return false; }
        }

        function setConfirmed() {
          try { localStorage.setItem(KEY, 'true'); }
          catch (e) {}
        }

        if (!isConfirmed()) {
          bsModal.show();
          ageModalEl.addEventListener('shown.bs.modal', () => {
            btnEnter.focus();
          });
        }

        btnEnter.addEventListener('click', () => {
          setConfirmed();
          bsModal.hide();
          document.getElementById('main').focus();
        });

        btnExit.addEventListener('click', () => {
          window.location.href = 'https://www.google.com';
        });

        ageModalEl.addEventListener('hide.bs.modal', (evt) => {
          if (!isConfirmed()) evt.preventDefault();
        });
      })();
    </script>
  </body>
</html>
